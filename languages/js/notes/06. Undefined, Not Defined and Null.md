# Undefined vs Null in JavaScript

## Memory and Value Comparison

### Undefined

```
+-------------------+                 +-------------------+
| Variable          |                 | Memory            |
|                   |                 |                   |
| let x;            | ------------>>  | x: undefined      |
+-------------------+                 +-------------------+
```

- **Definition**: Represents a variable that has been declared but not assigned a value.
- **Memory**: No memory is allocated for the value itself.
- **Assignment**: Automatic by JavaScript engine.
- **Type**: `typeof undefined` returns "undefined".
- **Value**: A primitive value.
- Memory space **is allocated** for the variable itself.
- The value `undefined` is a primitive value that represents the absence of a defined value.
- All `undefined` values point to the same memory location (singleton value).

### Null

```
+-------------------+                 +-------------------+
| Variable          |                 | Memory            |
|                   |                 |                   |
| let y = null;     | ------------>>  | y: null           |
+-------------------+                 +-------------------+
```

- **Definition**: Represents intentional absence of any object value.
- **Memory**: Memory is allocated for the null value.
- **Assignment**: Explicitly done by developers.
- **Type**: `typeof null` returns "object" (historical bug in JavaScript).
- **Value**: A primitive value representing "nothing".
- Memory space is allocated both for the variable and for the `null` value.
- `null` is also a primitive value, but it represents intentional absence of any object value.
- Like `undefined`, all `null` values share the same memory location.

## Key Differences

```
+-----------------------------+------------------------------+
| undefined                   | null                         |
+-----------------------------+------------------------------+
| Automatic default value     | Explicitly assigned          |
| Variable declared not       | Variable intentionally       |
| initialized                 | set to no value              |
| typeof returns "undefined"  | typeof returns "object"      |
+-----------------------------+------------------------------+
```

## Equality Comparison

```
undefined == null   // true (loose equality)
undefined === null  // false (strict equality)
```

## When to Use

- **undefined**: Usually not assigned explicitly, represents absence unintentionally.
- **null**: Explicitly assigned to indicate absence intentionally.

## Visual Representation of Memory Allocation

```
┌─────────────────────────┐       ┌──────────────────┐
│      MEMORY SPACE       │       │   VALUE SPACE    │
├─────────────────────────┤       ├──────────────────┤
│ let a;                  │     =>│   undefined      │<= Shared singleton
│ (variable declaration)  │       │                  │
├─────────────────────────┤       ├──────────────────┤
│ let b = null;           │     =>│   null           │<= Shared singleton
│ (explicit assignment)   │       │                  │
├─────────────────────────┤       ├──────────────────┤
│ let c = 42;             │     =>│   42             │<= Unique value
│ (number assignment)     │       │                  │
└─────────────────────────┘       └──────────────────┘
```

### Explanation

- Each variable (`a`, `b`, `c`) gets memory allocated for its reference.
- Shared values (`undefined`, `null`) use minimal memory, while unique values (e.g., `42`) require additional memory.

## Visual Representation of Memory Allocation with Memory Types (Stack vs Heap Memory Allocation)

```
┌─────────────────────────┐       ┌──────────────────┐
│      STACK MEMORY       │       │   HEAP MEMORY    │
├─────────────────────────┤       ├──────────────────┤
│ let a;                  │     =>│   undefined      │<= Shared singleton
│ (variable declaration)  │       │                  │
├─────────────────────────┤       ├──────────────────┤
│ let b = null;           │     =>│   null           │<= Shared singleton
│ (explicit assignment)   │       │                  │
├─────────────────────────┤       ├──────────────────┤
│ let c = 42;             │     =>│   42             │<= Unique value
│ (number assignment)     │       │                  │
└─────────────────────────┘       └──────────────────┘
```

### Key Points

- **Stack Memory**: Stores variable references (e.g., `a`, `b`, `c`).
- **Heap Memory**: Stores the actual values (e.g., `undefined`, `null`, `42`).
- Shared values (`undefined`, `null`) are stored as singletons in the heap.
- Unique values (e.g., `42`) require separate memory allocation in the heap.

This distinction between stack and heap memory is crucial for understanding JavaScript's memory management.

## Not Defined vs Undefined

```
+-------------------+                 +-------------------+
| Variable          |                 | Error             |
|                   |                 |                   |
| console.log(z);   | ------------>>  | z is not defined  |
+-------------------+                 +-------------------+
```

- **Not Defined**: A variable that has never been declared in any scope.
- **Error**: Accessing a not defined variable throws `ReferenceError`.
- **Scope**: Not present in memory at all.
- **Detection**: Cannot be checked with `typeof` (will cause error).

```javascript
// Undefined example
let a;
console.log(a); // undefined

// Not Defined example
console.log(b); // ReferenceError: b is not defined
```

### Checking for Not Defined Safely

```javascript
// Safe way to check
if (typeof potentiallyUndefinedVar !== 'undefined') {
    console.log('Variable exists');
}

// typeof returns "undefined" for both undefined variables 
// and not defined variables (without throwing error)
console.log(typeof someNonExistentVar); // "undefined"
```

- **Definition**: Represents intentional absence of any object value.
- **Memory**: Memory is allocated for the null value.
- **Assignment**: Explicitly done by developers.
- **Type**: `typeof null` returns "object" (historical bug in JavaScript).
- **Value**: A primitive value representing "nothing".

## Common Pitfalls and Best Practices

### Undefined vs Not Defined vs Null

| Undefined | Not Defined | Null |
|-----------|-------------|------|
| Variable exists but has no value | Variable does not exist in scope | Variable intentionally set to no value |
| `let x;` | `console.log(undeclaredVar)` | `let x = null;` |
| No error thrown | ReferenceError thrown | No error thrown |
| Default state | Error state | Intentional state |

### Best Practices

- Always initialize variables to avoid undefined values.
- Use `null` when you need to explicitly indicate "no value".
- Use optional chaining (`?.`) and nullish coalescing (`??`) for safer property access.
- Perform existence checks before accessing potentially undefined properties.

```javascript
// Bad practice
let user;
console.log(user.name); // TypeError: Cannot read property 'name' of undefined

// Good practice
let user = null;
console.log(user?.name); // undefined (no error)
console.log(user?.name ?? 'Unknown'); // "Unknown"
```
