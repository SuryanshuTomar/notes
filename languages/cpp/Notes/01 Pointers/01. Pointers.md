# Pointers in C++

## What are Pointers?

A **pointer** is a variable that stores the memory address of another variable.

### Visual Representation

```
int a = 10;
int* p = &a;
```

```
+-----+      +-----+
|  a  |      |  p  |
| 10  |      |  ?  |
+--+--+      +--+--+
    |            |
    |            |
    +------------+
          ^
          |
    +----+----+
    | Address |
    +---------+
```

- `a` holds the value `10`.
- `p` holds the address of `a`.

---

## How Pointers Work

- Pointers **store addresses** of variables.
- The `*` operator is used to **declare** a pointer and **dereference** it (access the value at the address).
- The `&` operator is used to **get the address** of a variable.

### Example

```cpp
int a = 10;
int* p = &a; // p stores the address of a
```

- `p` points to `a`.
- `*p` gives the value stored at the address `p` (i.e., value of `a`).

---

## Memory Storage of Pointers

- **Variables** (like `a`) are stored in the **stack** (for local variables).
- **Pointers** themselves are also stored in the stack, but the address they hold can point to:
  - Stack memory (local variables)
  - Heap memory (dynamically allocated)

### Visual Representation

```
Stack:
+-----------+    +-----------+
|   int a   |    |  int* p   |
|   10      |    | 0x7ffeef  |  <-- address of a
+-----------+    +-----------+

Heap:
(empty in this example)
```

---

## Accessing Data via Pointers

- **Accessing value:** Use `*p` to get the value at the address stored in `p`.
- **Changing value:** Use `*p = 20;` to change the value of `a` via the pointer.

### Example

```cpp
*p = 20; // changes a to 20
```

### Visual Representation

```
Before:
a = 10
p -> a

After:
a = 20
p -> a
```

---

## Pointers and Heap Memory

- Use `new` to allocate memory on the **heap**.
- Pointer stores the address of the heap memory.

### Example

```cpp
int* p = new int(30);
```

### Visual Representation

```
Stack:           Heap:
+-----------+    +-----------+
|  int* p   |--->|   int     |
| 0x123abc  |    |   30      |
+-----------+    +-----------+
```

---

## Summary Table

| Concept         | Stack/Heap | Visual         | Access Syntax |
|-----------------|------------|---------------|--------------|
| Variable        | Stack      | `a`           | `a`          |
| Pointer         | Stack      | `p`           | `p`          |
| Heap Allocation | Heap       | `*p` points   | `*p`         |

---

## Key Points

- Pointers store addresses, not values.
- They allow indirect access to variables and memory.
- Pointers themselves are stored in stack, but can point to stack or heap.
- Use `*` to access or modify the value pointed to.
- Use `&` to get the address of a variable.

---

## Double Pointers

A **double pointer** is a pointer that stores the address of another pointer.

### Declaration

```cpp
int a = 10;
int* p = &a;
int** pp = &p;
```

- `a` is an integer variable.
- `p` is a pointer to `a`.
- `pp` is a pointer to `p` (i.e., a double pointer).

### Visual Representation

```
+-----+      +-----+      +------+
|  a  |      |  p  |      | pp   |
| 10  |      | addr|      | addr |
+--+--+      +--+--+      +--+---+
    |            |            |
    |            |            |
    +------------+            |
         ^                    |
         |                    |
    +----+--------------------+
    |
+---+---+
|Address|
+-------+
```

Or, more explicitly:

```
Stack:
+-----------+    +-----------+    +-----------+
|   int a   |    |  int* p   |    | int** pp  |
|   10      |    | 0x7ffeef  |    | 0x7ffeed  |
+-----------+    +-----------+    +-----------+
                  ^                  ^
                  |                  |
                  +------------------+
```

### Dereferencing Double Pointers

- `*pp` gives the value stored in `p` (i.e., the address of `a`).
- `**pp` gives the value stored at the address pointed to by `p` (i.e., the value of `a`).

#### Example

```cpp
int a = 10;
int* p = &a;
int** pp = &p;

**pp = 50; // changes a to 50
```

- `*pp` is `p` (address of `a`)
- `**pp` is `a` (value at address stored in `p`)

### Visual Representation After Dereferencing

```
Before:
a = 10
p -> a
pp -> p

After:
**pp = 50
a = 50
p -> a
pp -> p
```

---

## Key Points on Double Pointers

- Double pointers are useful for dynamic memory allocation, arrays of pointers, and modifying pointers in functions.
- Each level of `*` dereferences one level of indirection.
- `*pp` accesses the pointer, `**pp` accesses the value pointed to by that pointer.