# Packages and Classpath in Java

## What is a Package?

A **package** in Java is a namespace that organizes related classes and interfaces. It's essentially a folder structure that groups similar classes together.

### Benefits of Using Packages:
1. **Organization**: Group related classes and interfaces
2. **Namespace Management**: Avoid naming conflicts
3. **Access Control**: Provide additional access protection
4. **Code Reusability**: Easy to find and reuse classes
5. **Maintainability**: Better code organization and maintenance

---

## Package Declaration

### Syntax:
```java
package packageName;
```

### Rules for Package Declaration:
1. Must be the **first line** in the Java file (except comments)
2. Only **one package declaration** per file
3. Package names are written in **lowercase**
4. Use **dot notation** for sub-packages

### Example:
```java
package com.company.project.utilities;

public class StringHelper {
    // class implementation
}
```

---

## Package Naming Conventions

### 1. **Standard Convention**
- Use reverse domain name notation
- Example: `com.companyname.projectname.modulename`

### 2. **Common Patterns**
```java
// Company packages
package com.google.android.apps;
package com.microsoft.office.word;

// Open source projects
package org.apache.commons.lang;
package org.springframework.boot;

// Educational/personal projects
package edu.university.department;
package personal.myname.project;
```

### 3. **Naming Rules**
- Use lowercase letters
- Separate words with dots
- No special characters except dots
- Cannot start with numbers
- Cannot use Java keywords

---

## Types of Packages

### 1. **Built-in Packages (Standard Library)**
Java provides many pre-defined packages:

```java
// Common built-in packages
java.lang.*     // Core classes (String, Object, System)
java.util.*     // Utility classes (Collections, Date, Scanner)
java.io.*       // Input/Output classes
java.net.*      // Networking classes
java.awt.*      // GUI components
javax.swing.*   // Advanced GUI components
java.sql.*      // Database connectivity
```

### 2. **User-defined Packages**
Packages created by developers:

```java
package com.mycompany.banking;
package com.mycompany.banking.accounts;
package com.mycompany.banking.transactions;
```

---

## Creating and Using Packages

### Step 1: Create Package Structure
```
src/
  com/
    mycompany/
      banking/
        Account.java
        BankingUtils.java
      utilities/
        MathHelper.java
```

### Step 2: Declare Package in Files

**File: src/com/mycompany/banking/Account.java**
```java
package com.mycompany.banking;

public class Account {
    private String accountNumber;
    private double balance;
    
    public Account(String accountNumber, double balance) {
        this.accountNumber = accountNumber;
        this.balance = balance;
    }
    
    public void displayInfo() {
        System.out.println("Account: " + accountNumber + ", Balance: $" + balance);
    }
    
    // getters and setters
    public String getAccountNumber() { return accountNumber; }
    public double getBalance() { return balance; }
    public void setBalance(double balance) { this.balance = balance; }
}
```

**File: src/com/mycompany/banking/BankingUtils.java**
```java
package com.mycompany.banking;

public class BankingUtils {
    public static double calculateInterest(double principal, double rate, int time) {
        return (principal * rate * time) / 100;
    }
    
    public static boolean isValidAccountNumber(String accountNumber) {
        return accountNumber != null && accountNumber.length() >= 8;
    }
}
```

**File: src/com/mycompany/utilities/MathHelper.java**
```java
package com.mycompany.utilities;

public class MathHelper {
    public static double roundToTwoDecimals(double value) {
        return Math.round(value * 100.0) / 100.0;
    }
    
    public static boolean isPrime(int number) {
        if (number <= 1) return false;
        for (int i = 2; i <= Math.sqrt(number); i++) {
            if (number % i == 0) return false;
        }
        return true;
    }
}
```

---

## Import Statements

### 1. **Import Specific Class**
```java
import com.mycompany.banking.Account;

public class Main {
    public static void main(String[] args) {
        Account acc = new Account("12345678", 1000.0);
        acc.displayInfo();
    }
}
```

### 2. **Import All Classes from Package**
```java
import com.mycompany.banking.*;

public class Main {
    public static void main(String[] args) {
        Account acc = new Account("12345678", 1000.0);
        double interest = BankingUtils.calculateInterest(1000, 5, 2);
    }
}
```

### 3. **Import Static Members**
```java
import static com.mycompany.utilities.MathHelper.roundToTwoDecimals;
import static com.mycompany.utilities.MathHelper.isPrime;

public class Main {
    public static void main(String[] args) {
        double rounded = roundToTwoDecimals(3.14159);
        boolean prime = isPrime(17);
    }
}
```

### 4. **Fully Qualified Names** (No import needed)
```java
public class Main {
    public static void main(String[] args) {
        com.mycompany.banking.Account acc = 
            new com.mycompany.banking.Account("12345678", 1000.0);
    }
}
```

---

## Access Modifiers and Packages

| Modifier | Same Class | Same Package | Subclass | Different Package |
|----------|------------|--------------|----------|-------------------|
| `private` | ✓ | ✗ | ✗ | ✗ |
| `default` | ✓ | ✓ | ✗ | ✗ |
| `protected` | ✓ | ✓ | ✓ | ✗ |
| `public` | ✓ | ✓ | ✓ | ✓ |

### Example:
```java
package com.mycompany.banking;

public class Account {
    private String accountNumber;        // Only within this class
    double balance;                      // Package-private (default)
    protected String customerName;       // Same package + subclasses
    public String bankName;             // Accessible everywhere
}
```

---

## What is Classpath?

**Classpath** is an environment variable that tells the JVM where to look for user-defined classes and packages.

### Purpose:
- Specifies the location of `.class` files
- Tells JVM where to find packages
- Required for compilation and execution

---

## Setting Classpath

### 1. **Command Line (Temporary)**

#### During Compilation:
```bash
# Compile with classpath
javac -cp src src/com/mycompany/banking/*.java

# Or using classpath flag
javac -classpath src src/com/mycompany/banking/*.java
```

#### During Execution:
```bash
# Run with classpath
java -cp src com.mycompany.banking.Main

# Multiple paths (Windows)
java -cp "src;lib/commons.jar" com.mycompany.banking.Main

# Multiple paths (Linux/Mac)
java -cp "src:lib/commons.jar" com.mycompany.banking.Main
```

### 2. **Environment Variable (Permanent)**

#### Windows:
```cmd
set CLASSPATH=C:\myproject\src;C:\myproject\lib\commons.jar
```

#### Linux/Mac:
```bash
export CLASSPATH=/home/user/myproject/src:/home/user/myproject/lib/commons.jar
```

### 3. **Using JAR Files**
```bash
# Include JAR file in classpath
java -cp "src;lib/mysql-connector.jar;lib/commons-lang.jar" Main

# Current directory and JAR
java -cp ".;lib/*" Main
```

---

## Practical Examples

### Example 1: Complete Package Structure

```
Project Structure:
src/
  com/
    banking/
      model/
        Account.java
        Customer.java
      service/
        AccountService.java
      utils/
        ValidationUtils.java
      Main.java
```

**Account.java:**
```java
package com.banking.model;

public class Account {
    private String accountId;
    private String customerId;
    private double balance;
    
    public Account(String accountId, String customerId, double balance) {
        this.accountId = accountId;
        this.customerId = customerId;
        this.balance = balance;
    }
    
    // Getters and setters
    public String getAccountId() { return accountId; }
    public String getCustomerId() { return customerId; }
    public double getBalance() { return balance; }
    public void setBalance(double balance) { this.balance = balance; }
}
```

**Customer.java:**
```java
package com.banking.model;

public class Customer {
    private String customerId;
    private String name;
    private String email;
    
    public Customer(String customerId, String name, String email) {
        this.customerId = customerId;
        this.name = name;
        this.email = email;
    }
    
    // Getters and setters
    public String getCustomerId() { return customerId; }
    public String getName() { return name; }
    public String getEmail() { return email; }
}
```

**ValidationUtils.java:**
```java
package com.banking.utils;

public class ValidationUtils {
    public static boolean isValidEmail(String email) {
        return email != null && email.contains("@") && email.contains(".");
    }
    
    public static boolean isValidAccountId(String accountId) {
        return accountId != null && accountId.length() >= 8;
    }
    
    public static boolean isValidAmount(double amount) {
        return amount > 0;
    }
}
```

**AccountService.java:**
```java
package com.banking.service;

import com.banking.model.Account;
import com.banking.model.Customer;
import com.banking.utils.ValidationUtils;

public class AccountService {
    public void createAccount(Customer customer, double initialBalance) {
        if (!ValidationUtils.isValidEmail(customer.getEmail())) {
            System.out.println("Invalid email address");
            return;
        }
        
        if (!ValidationUtils.isValidAmount(initialBalance)) {
            System.out.println("Invalid initial balance");
            return;
        }
        
        String accountId = generateAccountId();
        Account account = new Account(accountId, customer.getCustomerId(), initialBalance);
        System.out.println("Account created successfully: " + accountId);
    }
    
    private String generateAccountId() {
        return "ACC" + System.currentTimeMillis();
    }
    
    public void transfer(Account from, Account to, double amount) {
        if (!ValidationUtils.isValidAmount(amount)) {
            System.out.println("Invalid transfer amount");
            return;
        }
        
        if (from.getBalance() < amount) {
            System.out.println("Insufficient balance");
            return;
        }
        
        from.setBalance(from.getBalance() - amount);
        to.setBalance(to.getBalance() + amount);
        System.out.println("Transfer successful");
    }
}
```

**Main.java:**
```java
package com.banking;

import com.banking.model.Account;
import com.banking.model.Customer;
import com.banking.service.AccountService;

public class Main {
    public static void main(String[] args) {
        // Create customers
        Customer customer1 = new Customer("CUST001", "John Doe", "john@email.com");
        Customer customer2 = new Customer("CUST002", "Jane Smith", "jane@email.com");
        
        // Create account service
        AccountService service = new AccountService();
        
        // Create accounts
        service.createAccount(customer1, 1000.0);
        service.createAccount(customer2, 500.0);
        
        // Create account objects for transfer demo
        Account acc1 = new Account("ACC001", "CUST001", 1000.0);
        Account acc2 = new Account("ACC002", "CUST002", 500.0);
        
        // Transfer money
        service.transfer(acc1, acc2, 200.0);
        
        System.out.println("Account 1 balance: $" + acc1.getBalance());
        System.out.println("Account 2 balance: $" + acc2.getBalance());
    }
}
```

### Compilation and Execution:
```bash
# Compile all files
javac -cp src src/com/banking/model/*.java
javac -cp src src/com/banking/utils/*.java
javac -cp src src/com/banking/service/*.java
javac -cp src src/com/banking/*.java

# Or compile all at once
javac -cp src src/com/banking/*/*.java src/com/banking/*.java

# Run the program
java -cp src com.banking.Main
```

---

## Common Classpath Issues and Solutions

### 1. **ClassNotFoundException**
```java
Exception in thread "main" java.lang.ClassNotFoundException: com.banking.Main
```
**Solution:** Check if classpath includes the directory containing the package structure.

### 2. **NoClassDefFoundError**
```java
Exception in thread "main" java.lang.NoClassDefFoundError: com/banking/model/Account
```
**Solution:** Ensure all dependent classes are compiled and in the classpath.

### 3. **Package Does Not Exist**
```java
error: package com.banking.model does not exist
```
**Solution:** Verify package declaration matches directory structure.

---

## Best Practices

### 1. **Package Organization**
```java
// Good package structure
com.company.project.model        // Data models
com.company.project.service      // Business logic
com.company.project.controller   // Controllers
com.company.project.utils        // Utility classes
com.company.project.exception    // Custom exceptions
```

### 2. **Import Guidelines**
- Import specific classes rather than using wildcard (*)
- Group imports logically
- Remove unused imports

```java
// Good
import java.util.List;
import java.util.ArrayList;
import com.company.model.User;

// Avoid (unless importing many classes)
import java.util.*;
import com.company.model.*;
```

### 3. **Classpath Management**
- Use build tools (Maven, Gradle) for complex projects
- Keep classpath organized
- Document classpath requirements

### 4. **Directory Structure**
```
project/
  src/
    main/
      java/
        com/company/project/
  lib/
  build/
  docs/
```

---

## Summary

| Concept | Description | Example |
|---------|-------------|---------|
| **Package** | Namespace for organizing classes | `package com.company.project;` |
| **Import** | Include classes from other packages | `import java.util.List;` |
| **Classpath** | Path where JVM looks for classes | `java -cp src Main` |
| **Access Control** | Package-level access protection | `default`, `protected` modifiers |
| **Naming Convention** | Reverse domain notation | `com.company.project.module` |

---

**Key Points to Remember:**
- Package declaration must be the first non-comment line
- Directory structure must match package structure
- Use meaningful package names following conventions
- Classpath is crucial for finding classes during compilation and execution
- Packages provide namespace management and access control
- Import statements make classes from other packages available